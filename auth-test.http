### Variables Globales
@host = http://localhost:8080
@contentType = application/json

### 1. Registrar un nuevo usuario
POST {{host}}/auth/register
Content-Type: {{contentType}}

{
  "username": "testuser2",
  "password": "123"
}

> {%
    client.test("Registro exitoso - Estado 200 o 201", function() {
        client.assert(response.status === 200 || response.status === 201, "Falló el registro");
    });
%}

### 2. Iniciar sesión (Login)
POST {{host}}/auth/login
Content-Type: {{contentType}}

{
  "username": "testuser",
  "password": "password123"
}

> {%
    client.test("Login exitoso - Estado 200", function() {
        client.assert(response.status === 200, "Falló el login");
    });
    if (response.body.token) {
        client.global.set("auth_token", response.body.token);
        client.log("Token guardado: " + response.body.token);
    }
%}